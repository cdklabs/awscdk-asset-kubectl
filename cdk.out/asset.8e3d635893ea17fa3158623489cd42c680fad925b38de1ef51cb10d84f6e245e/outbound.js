"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.httpRequest=exports.invokeFunction=exports.startExecution=void 0;const https=require("https"),AWS=require("aws-sdk"),FRAMEWORK_HANDLER_TIMEOUT=9e5,awsSdkConfig={httpOptions:{timeout:FRAMEWORK_HANDLER_TIMEOUT}};async function defaultHttpRequest(options,responseBody){return new Promise((resolve,reject)=>{try{const request=https.request(options,resolve);request.on("error",reject),request.write(responseBody),request.end()}catch(e){reject(e)}})}let sfn,lambda;async function defaultStartExecution(req){return sfn||(sfn=new AWS.StepFunctions(awsSdkConfig)),sfn.startExecution(req).promise()}async function defaultInvokeFunction(req){lambda||(lambda=new AWS.Lambda(awsSdkConfig));try{return await lambda.invoke(req).promise()}catch{return await lambda.waitFor("functionActive",{FunctionName:req.FunctionName}).promise(),await lambda.invoke(req).promise()}}exports.startExecution=defaultStartExecution,exports.invokeFunction=defaultInvokeFunction,exports.httpRequest=defaultHttpRequest;
